{"ast":null,"code":"import * as data from '../../mock-data.json';\nimport { of, pipe } from 'rxjs';\nimport { distinctUntilChanged, debounceTime, switchMap } from 'rxjs/operators';\nimport { equalshWords } from 'src/app/pages/header/img-url';\nimport * as i0 from \"@angular/core\";\nexport let SortCoursesService = /*#__PURE__*/(() => {\n  class SortCoursesService {\n    constructor() {\n      this.dictionaryData = data;\n      this.MaxKeyCourses = 8; //------------------------------------------------------------------------------------\n\n      this.getListCourses = () => pipe(debounceTime(300), distinctUntilChanged(), switchMap(input => {\n        input = input.trim();\n\n        if (!isNaN(Number(input))) {\n          const key = input[0];\n          const keyDictionary = this.dictionaryData[key];\n\n          if (keyDictionary) {\n            const filteredDictionary = keyDictionary.filter(item => item.CourseNumber.includes(input));\n            return of(filteredDictionary);\n          } else {\n            return of([]);\n          }\n        } else {\n          let filteredDictionary = [];\n          let inputArr = this.searcInputhArr(input);\n          console.log(inputArr);\n          let n = [];\n\n          for (let i = 0; i <= 8; i++) {\n            const keyDictionary = this.dictionaryData[i];\n\n            if (keyDictionary) {\n              filteredDictionary = keyDictionary.filter(item => this.includesSearchWords(item, inputArr));\n              n = [...n, ...filteredDictionary];\n            }\n          }\n\n          return of(n);\n        }\n      }));\n    }\n\n    getSelectedCourse(courseNumber) {\n      let tmp1;\n      let courseName = sessionStorage.getItem(\"selectedItem\");\n\n      if (courseNumber) {\n        const key = courseNumber[0];\n        const keyDictionary = this.dictionaryData[key];\n\n        if (keyDictionary) {\n          for (let i = 0; i < keyDictionary.length; i++) {\n            let tmp = keyDictionary[i];\n\n            if (tmp.CourseNumber === courseNumber && tmp.CourseName === courseName) {\n              return tmp;\n            }\n          }\n        }\n      } else {\n        return tmp1;\n      }\n\n      return tmp1;\n    } //------------------------------------------------------------------------------------\n\n\n    isItemFavorite(item) {\n      const favorites = JSON.parse(localStorage.getItem('courseName') || '[]');\n\n      if (favorites.includes(item.CourseName)) {\n        return 'favorite.svg';\n      }\n\n      return 'notFavorite.svg';\n    } //------------------------------------------------------------------------------------\n\n\n    findFavoriteCourses() {\n      let coursesNames = JSON.parse(localStorage.getItem('courseName') || '[]');\n      let favorites = [];\n\n      for (let i = 0; i <= this.MaxKeyCourses; i++) {\n        let keyDictionary = [];\n\n        if (this.dictionaryData[i]) {\n          keyDictionary = this.dictionaryData[i];\n        }\n\n        let index = 0;\n\n        while (keyDictionary[index]) {\n          if (coursesNames.includes(keyDictionary[index].CourseName)) {\n            favorites.push(keyDictionary[index]);\n          }\n\n          index++;\n        }\n      }\n\n      return favorites;\n    }\n\n    searcInputhArr(input) {\n      let Arr = [];\n      let tmp = \" \";\n\n      for (let i = 0; i < input.length; i++) {\n        if (input[i] != \" \") {\n          tmp = tmp + input[i];\n        } else {\n          Arr.push(tmp);\n          tmp = \" \";\n        }\n      }\n\n      Arr.push(tmp);\n\n      for (let i = 0; i < equalshWords.length; i++) {\n        for (let y = 0; y < Arr.length; y++) {\n          if (equalshWords[i].includes(Arr[y])) {\n            Arr.splice(y, 1);\n            Arr = [...Arr, ...equalshWords[i]];\n          }\n        }\n      }\n\n      return Arr;\n    }\n\n    includesSearchWords(item, search) {\n      let TorF = true;\n\n      for (let i = 0; i < search.length - 1 && search.length > 1; i++) {\n        if (!(\" \" + item.CourseName).includes(search[i]) || !item.CourseName.includes(search[i + 1])) {\n          TorF = false;\n        }\n      }\n\n      return (\" \" + item.CourseName).includes(search[0]) && TorF;\n    }\n\n  }\n\n  SortCoursesService.ɵfac = function SortCoursesService_Factory(t) {\n    return new (t || SortCoursesService)();\n  };\n\n  SortCoursesService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: SortCoursesService,\n    factory: SortCoursesService.ɵfac,\n    providedIn: 'root'\n  });\n  return SortCoursesService;\n})();","map":null,"metadata":{},"sourceType":"module"}